---
title: 'Usar promesas de JavaScript'
parent: Developers
---

<article class="bcls-article">
  <h1>Conceptos: Usar promesas de JavaScript</h1>
  <summary>En este tema, aprenderá a usar Promesas de JavaScript, que son devueltas por algunos métodos de Brightcove Player.</summary>
  <section class="bcls-section">
    <h2 id="section-name2">Promesa simple</h2>
    <!-- <aside class="bcls-aside bcls-aside--information">Note: <strong translate="No">Promises</strong> do not work in IE11. Use the polyfill of the <a translate="No" href="https://www.npmjs.com/package/es6-promise">ES6-Promise</a> to add this functionality to IE11.</aside> -->
    <p>Aunque el propósito de este documento NO es enseñarle a escribir un JavaScript <code translate="No">Promise</code>, para entender cómo utilizarlo es instructivo ver cómo es simple <code translate="No">Promise</code> está codificado.</p>
    <p>A continuación, un <code translate="No">Promise</code> Se crea que devuelve una cadena que indica si una tarea se completó o no. El punto clave es que <code translate="No">Promise.resolve()</code> o <code translate="No">Promise.reject()</code> se llama al método. En este caso, ambos métodos pasan una cadena simple, pero podría ser un objeto.</p>
    <aside class="bcls-aside bcls-aside--information">Nota: Aunque NO se demuestra en este sencillo ejemplo, el <code translate="No">Promise</code> objeto representa el <strong>finalización eventual</strong> (o falla) de un <strong>operación asincrónica</strong> y su valor resultante. De este modo, un concepto <code translate="No">Promise</code> es similar a una función de devolución de llamada.</aside>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">let promiseToFinishTask = new Promise(function(resolve, reject) {
          
            //Business logic to set taskComplete boolean
            let taskComplete = true;
          
            if (taskComplete) {
              resolve('Yea, I am done');
            } else {
              reject('Not quite done');
            }
          });</code></pre>
    <p>Ahora verás cómo lidiar con las devoluciones. <code translate="No">Promise</code> información, que es lo que hará con algunas llamadas al método API de Brightcove Player. El manejo básico de a sigue:</p>
    sigue:
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">promiseName.then(
            // Function call for promise resolved
          ).catch(
            // Function call for promise rejected
          )</code></pre>
    <p>El manejo del ejemplo simple anterior aparecería como se muestra aquí:</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">promiseToFinishTask.then(function(fromResolve) {
            console.log(fromResolve);
          }).catch(function(fromReject) {
            console.log(fromReject);
          });</code></pre>
    <p>Si el <code translate="No">Promise</code> se resuelve el <code translate="No">then</code> se ejecuta el código, y si el <code translate="No">Promise</code> es rechazado el <code translate="No">catch</code> se ejecuta el código. Por ejemplo, una de las cadenas <strong translate="No">Si, he terminado</strong> o <strong translate="No">No del todo hecho</strong> aparecería en función de la lógica empresarial que establece el <code translate="No">taskComplete</code> valor de la variable.</p>
  </section>
  <section class="bcls-section">
    <h2 id="section-name3">Ejemplo de Brightcove</h2>
    <p>El jugador de Brightcove <code translate="No">play()</code> El método puede devolver una Promesa que se puede usar para verificar si el reproductor puede reproducir automáticamente el video que se encuentra actualmente en el reproductor. El código que se ocupa de la <code translate="No">Promise</code> está resaltado:</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">var myPlayer = videojs.getPlayer('myPlayerID');
          myPlayer.on('loadedmetadata',function() {
            var promise = myPlayer.play();
            if (promise !== undefined) {
              <span class="bcls-highlight">promise.then(function() {
                // Autoplay started!
              }).catch(function(error) {
                // Autoplay was prevented.
              });</span>
            }
          });</code></pre>
    <p>En base a esto, puede codificar comportamientos si el video se reproduce automáticamente o no. Para un caso de uso específico que reproduce el video, con audio cuando sea posible, consulte la <a href="https://player.support.brightcove.com/playback/autoplay-considerations.html#Specific_use_case">Caso de uso específico</a> sección de la <strong>Consideraciones sobre la reproducción automática</strong> documento.</p>
    <p>Para obtener información completa sobre las promesas de JavaScript, consulte el <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promesa MDN</a> documento.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Promise_versus_callback"><code translate="No">Promise</code> versus devolución de llamada</h2>
    <p>En esta sección el Catálogo <code translate="No">get()</code> se utiliza para demostrar la diferencia de sintaxis entre utilizar un <code translate="No">Promise</code> versus una función de devolución de llamada. La <code translate="No">get()</code> El método se puede utilizar con cualquier enfoque.</p>
    <h3>Sintaxis de promesa</h3>
    <p>El siguiente es un fragmento de código que muestra la llamada al <code translate="No">get()</code> método, manejando la respuesta como un <code translate="No">Promise</code>:</p>
    <pre class="line-numbers">
          <code class="language-javascript" translate="No">myPlayer.catalog.get(catalogParams).then(function(videosReturned){
            console.log('videosReturned',videosReturned);
            myPlayer.playlist(videosReturned);
          }).catch(function(errorObj){
            console.log('errorObj',errorObj);
          })</code></pre>
    <h3>Sintaxis de la función de devolución de llamada</h3>
    <p>El siguiente es un fragmento de código que muestra la llamada al <code translate="No">get()</code> método, manejando la respuesta con una función de devolución de llamada:</p>
    <pre class="line-numbers">
            <code class="language-javascript" translate="No">myPlayer.catalog.get(catalogParams,function(errorObj,videosReturned){
            console.log('errorObj',errorObj);
            console.log('videosReturned',videosReturned);
            myPlayer.playlist(videosReturned);
          });
          </code></pre>
  </section>
</article>