---
title: 'El patrón de diseño del módulo JavaScript'
parent: Developers
---

<article class="bcls-article">
  <h1>Conceptos: El patrón de diseño del módulo JavaScript</h1>
  <summary>En este tema, aprenderá a utilizar el patrón de diseño de módulos de JavaScript para reducir la posibilidad de que su código entre en conflicto con otros scripts de su página web.</summary>
  <section class="bcls-section">
    <h2 id="Scope_conflicts">Conflictos de alcance</h2>
    <p>En JavaScript, cuando define una variable usando el <code translate="No">var</code> elemento, está dentro de la función que está definida. Si define una variable sin utilizarla <code translate="No">var</code>, se le asigna el ámbito global. Esto significa que las variables globales son vulnerables a colisiones con otros scripts en su página.</p>
    <p>Veamos un ejemplo de código. En el siguiente código, la función y las variables existen dentro del alcance de la página.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// script 1
var incrementCount = function() {
    count++;
}

var myButton = document.getElementById('buttonId');
var count = 0;

myButton.onclick = incrementCount;</code></pre>
    <p>Ahora, digamos que hay una función fuera de su script que también modifica el global <code translate="No">count</code> variable. Esta colisión de scripts puede provocar resultados inesperados.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// script 2
var countVideos = function(videoList) {
    count = videoList.length;
}</code></pre>
    <p>Resultados:</p>
    <ol>
      <li>El usuario selecciona el <code translate="No">myButton</code> dos veces, incrementando el <code translate="No">count</code> variable en <code translate="No">script 1</code>.
        <ul>
          <li><code translate="No">count</code> = <strong>2</strong></li>
        </ul>
      </li>
      <li>Se llama a la <code translate="No">countvideos</code> función que existe en la página web <code translate="No">Script 2</code>, pero también en su página web. Digamos que el <code translate="No">videoList</code> contiene 10 elementos. Ahora el <code translate="No">count</code> La variable global tiene un valor de <strong>10</strong>.
        <ul>
          <li><code translate="No">count</code> = <strong>10</strong></li>
        </ul>
      </li>
      <li>La próxima vez que el usuario seleccione <code translate="No">myButton</code> botón, el <code translate="No">count</code> La variable devolverá resultados inesperados.
        <ul>
          <li>Esperado: <code translate="No">count</code> = <strong>3</strong></li>
          <li>Real: <code translate="No">count</code> = <strong>11</strong></li>
        </ul>
      </li>
    </ol>
    <p>Puede intentar evitar conflictos en sus scripts, pero no hay garantía de que los scripts de terceros incluidos en su página no utilicen funciones y nombres de variables similares.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Anonymous_functions">Funciones anónimas</h2>
    <p>Una solución es envolver su código en una función anónima (también llamada cierre), que se ejecuta inmediatamente. Su código dentro de un cierre no es accesible por otros scripts. Entonces, esto le brinda una forma de crear funciones y variables privadas.</p>
    <p>Aquí está la sintaxis de una función anónima:</p>
    <ul>
      <li>Línea 3: incluye un conjunto adicional de paréntesis, que le dice a JavaScript que ejecute la función inmediatamente después de que se haya analizado, en lugar de esperar a que otro código llame a la función.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">(function () {
    // your code
}<span class="bcls-highlight">()</span>);</code></pre>
    <p>Los cierres pueden ser poderosos, ya que brindan privacidad y estado durante toda la vida útil de la aplicación. Para el código dentro del cierre, todas las variables y funciones están solo en el alcance del cierre. Pero su código dentro del cierre aún puede acceder a cualquier variable o función global.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Globals">Globales</h2>
    <p>Aunque JavaScript tiene una característica conocida como globales implícitas, puede hacer que su código sea difícil de administrar, ya que no es fácil determinar qué variables son globales. Para determinar si una variable es global, el intérprete tiene que caminar hacia atrás a través de la cadena de alcance en busca de una <code translate="No">var</code> declaración que coincide con el nombre. Si no se encuentra ninguno, se supone que la variable es global.</p>
    <h3>Pasar en globales</h3>
    <p>Con la función anónima, puede pasar explícitamente parámetros globales. A esto se le llama importar parámetros en su código.</p>
    <p>Aquí hay un ejemplo:</p>
    <ul>
      <li>Línea 1: define el nombre de los parámetros que se pasan a la función. Tenga en cuenta que no es necesario que coincidan con los nombres de la línea 3. Aquí el <code translate="No">window</code> el objeto se pasa a un parámetro llamado <code translate="No">window1</code>.</li>
      <li>Línea 3: pasa el <code translate="No">window</code> objeto en la función.</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">(function( window1, undefined ) {
    ...
})(window);</code></pre>
    <p>Dado que solo se pasa 1 objeto, pero hay dos parámetros, el valor de <code translate="No">undefined</code> será indefinido.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">typeof undefined == "undefined"</code></pre>
    <p>Esto puede resultar útil si desea una forma sencilla de comprobar si se han definido otras variables.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">if(variable1 === undefined)</code></pre>
    <h3>Exportar globales</h3>
    <p>Es posible que también desee pasar variables y funciones fuera de su función anónima. Puede hacer esto usando el <code translate="No">return</code> valor.</p>
    <p>Aquí hay un ejemplo:</p>
    <ul>
      <li>Línea 1: asigna nuestra función anónima a <code translate="No">BCLS</code>. Este valor puede ser cualquier cosa que elija. En este ejemplo, usamos BCLS (Brightcove Learning Services).</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = (function( window1, undefined ) {
    var object1 = {};
    object1.count = 1;
    object1.method = function () {
        ...
    }
    <span class="bcls-highlight">return object1;</span>
})(window);</code></pre>
    <p>La <code translate="No">object1</code> El objeto ahora está disponible globalmente con dos propiedades públicas, una variable llamada <code translate="No">count</code> y una función llamada <code translate="No">method</code>. Se puede acceder a ellos fuera de nuestra función anónima como:</p>
    <ul>
      <li><code translate="No">BCLS.object1.count</code></li>
      <li><code translate="No">BCLS.object1.method</code></li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Complete_example">Ejemplos completos</h2>
    <p>A continuación, se muestran algunos ejemplos completos del patrón de diseño de módulos de JavaScript.</p>
    <h3>Ejemplo 1</h3>
    <p>Este ejemplo muestra cómo crear variables y funciones públicas y privadas utilizando el patrón de módulo.</p>
    <ul>
      <li>Variables privadas: <code translate="No">myvar</code>, <code translate="No">myvar2</code></li>
      <li>Funciones privadas: <code translate="No">fname</code>, <code translate="No">fname2</code></li>
      <li>Variable pública: <code translate="No">myvar3</code></li>
      <li>Función pública: <code translate="No">fname3</code></li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = ( function() {
   var myvar = value,
       myvar2 = value;

   fname = function() {
        ...
   };
   fname2 = function() {
        ...
   };

   return {
        fname3 : function() {
             ...
        },
        myvar3 = value;
   };
}());</code></pre>
    <h3>Ejemplo 2</h3>
    <p>Este ejemplo pasa objetos globales y expone una función pública.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var BCLS = (function( window, document, videojs ) {
    var myvar = value;

    // use a global object passed into the anonymous function
    videojs.registerPlugin('overlay');

    fname = function() {
        ...
    }
    return {
      fname2 : function() {
            ...
        }
    }
})(window, document, videojs);

// call the public function fname2
var newvar = BCLS.fname2();</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Code_samples">Muestras de código</h2>
    <p>Algunos de nuestros ejemplos de código utilizan el patrón de diseño de módulos de JavaScript, y puede revisarlos para obtener ideas sobre cómo implementar este patrón.</p>
    <ul>
      <li><a href="https://player.support.brightcove.com/code-samples/brightcove-player-sample-floating-player.html">Jugador flotante</a></li>
    </ul>
  </section>
</article>